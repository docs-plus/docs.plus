# ============================================
# Environment Configuration
# ============================================
ENVIRONMENT=dev
NODE_ENV=development
APP_NAME=docsplus

# ============================================
# Server Ports
# ============================================
APP_PORT=2300
HOCUSPOCUS_PORT=1234
EXPOSE_APP_PORT=2300
EXPOSE_HOCUSPOCUS_PORT=1234

# ============================================
# Database (PostgreSQL) - ENHANCED
# ============================================
DATABASE_URL=postgresql://postgres:postgres@localhost:54322/docsplus?schema=public&connection_limit=20&pool_timeout=20&connect_timeout=10

# OR use separate variables:
# DATABASE_URL=postgresql://postgres:postgres@localhost:54322/docsplus?schema=public
# DB_CONNECTION_LIMIT=20
# DB_POOL_TIMEOUT=20
# DB_CONNECT_TIMEOUT=10

# ============================================
# Redis Configuration - ENHANCED
# ============================================
REDIS=true
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Performance & Reliability Settings (NEW)
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_KEEPALIVE=30000
REDIS_MAX_RETRIES=10

# ============================================
# BullMQ Queue Configuration - NEW
# ============================================
BULLMQ_CONCURRENCY=5
BULLMQ_RATE_LIMIT_MAX=300
BULLMQ_RATE_LIMIT_DURATION=1000

# ============================================
# Hocuspocus Logger
# ============================================
HOCUSPOCUS_LOGGER=true
HOCUSPOCUS_LOGGER_ON_CONNECT=true
HOCUSPOCUS_LOGGER_ON_DISCONNECT=true
HOCUSPOCUS_LOGGER_ON_LOAD_DOCUMENT=true
HOCUSPOCUS_LOGGER_ON_CHANGE=false
HOCUSPOCUS_LOGGER_ON_UPGRADE=true
HOCUSPOCUS_LOGGER_ON_REQUEST=true
HOCUSPOCUS_LOGGER_ON_LISTEN=true
HOCUSPOCUS_LOGGER_ON_DESTROY=true
HOCUSPOCUS_LOGGER_ON_CONFIGURE=true

# ============================================
# Throttle Protection
# ============================================
HOCUSPOCUS_THROTTLE=true
HOCUSPOCUS_THROTTLE_ATTEMPTS=10
HOCUSPOCUS_THROTTLE_BANTIME=60000

# ============================================
# Storage - Local
# ============================================
PERSIST_TO_LOCAL_STORAGE=true
LOCAL_STORAGE_PATH=/app/temp/hypermultimedia

# ============================================
# Storage - DigitalOcean Spaces (S3) - ENHANCED
# ============================================
DO_STORAGE_ENDPOINT=https://nyc3.digitaloceanspaces.com
DO_STORAGE_REGION=us-east-1
DO_STORAGE_BUCKET=your-bucket-name
DO_STORAGE_ACCESS_KEY_ID=your-access-key
DO_STORAGE_SECRET_ACCESS_KEY=your-secret-key
DO_STORAGE_MAX_FILE_SIZE=4194304

# Performance Settings (NEW)
S3_CONNECT_TIMEOUT=10000
S3_REQUEST_TIMEOUT=30000

# ============================================
# Supabase
# ============================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key

# ============================================
# Security & Rate Limiting
# ============================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
RATE_LIMIT_MAX=100
